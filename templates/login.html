{% extends "base.html" %}

{% block title %}Login - Securitization Dashboard{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow-lg">
            <div class="card-body p-5">
                <div class="text-center mb-4">
                    <div class="display-4 text-primary mb-3">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <h2 class="fw-bold text-dark">User Login</h2>
                    <p class="text-muted">
                        Access your securitization workspace
                    </p>
                </div>
                
                <form method="POST" action="{{ url_for('user_login') }}" id="loginForm">
                    <div class="mb-3">
                        <label for="email" class="form-label fw-semibold">
                            <i class="fas fa-envelope me-2"></i>Email Address
                        </label>
                        <input type="email" 
                               class="form-control form-control-lg" 
                               id="email" 
                               name="email" 
                               placeholder="your.email@company.com"
                               required
                               autofocus>
                    </div>
                    
                    <div class="mb-4">
                        <label for="password" class="form-label fw-semibold">
                            <i class="fas fa-lock me-2"></i>Password
                        </label>
                        <input type="password" 
                               class="form-control form-control-lg" 
                               id="password" 
                               name="password" 
                               placeholder="Enter your password"
                               required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg w-100 mb-3">
                        <span class="loading spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                        <i class="fas fa-sign-in-alt me-2"></i>
                        Sign In
                    </button>
                </form>
                
                <div class="text-center mt-4">
                    <div class="small text-muted">
                        Need access? Contact your system administrator
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Demo Credentials (for development) -->
        <div class="card mt-4 border-warning">
            <div class="card-header bg-warning text-dark">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Demo Credentials</strong>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="fw-bold">Administrator Account</h6>
                        <p class="mb-1"><strong>Email:</strong> admin@securitization.com</p>
                        <p class="mb-0"><strong>Password:</strong> SecureAdmin123!</p>
                        <small class="text-muted">Full system access</small>
                    </div>
                    <div class="col-md-6">
                        <h6 class="fw-bold">Analyst Account</h6>
                        <p class="mb-1"><strong>Email:</strong> analyst@securitization.com</p>
                        <p class="mb-0"><strong>Password:</strong> AnalystPass123!</p>
                        <small class="text-muted">Analysis & reporting access</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- System Status -->
        <div class="mt-4">
            <div class="card bg-light">
                <div class="card-body py-3">
                    <div class="row text-center">
                        <div class="col-4">
                            <div class="text-success">
                                <i class="fas fa-circle fa-sm me-1"></i>
                                <small>Engine Ready</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-success">
                                <i class="fas fa-circle fa-sm me-1"></i>
                                <small>Database Online</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-success">
                                <i class="fas fa-circle fa-sm me-1"></i>
                                <small>Security Active</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.getElementById('loginForm').addEventListener('submit', function() {
    showLoading('loginForm');
});

// Auto-fill demo credentials for easier testing
function fillCredentials(type) {
    if (type === 'admin') {
        document.getElementById('email').value = 'admin@securitization.com';
        document.getElementById('password').value = 'SecureAdmin123!';
    } else if (type === 'analyst') {
        document.getElementById('email').value = 'analyst@securitization.com';
        document.getElementById('password').value = 'AnalystPass123!';
    }
}

// Add click handlers to credential cards
document.addEventListener('DOMContentLoaded', function() {
    const adminCard = document.querySelector('.col-md-6:first-child');
    const analystCard = document.querySelector('.col-md-6:last-child');
    
    adminCard.style.cursor = 'pointer';
    analystCard.style.cursor = 'pointer';
    
    adminCard.addEventListener('click', () => fillCredentials('admin'));
    analystCard.addEventListener('click', () => fillCredentials('analyst'));
});
</script>
{% endblock %}